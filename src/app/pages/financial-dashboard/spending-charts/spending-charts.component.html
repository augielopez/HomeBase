<div class="spending-charts-section">
  <!-- Section Header -->
  <div class="flex justify-between items-center mb-6">
    <div>
      <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Spending Analysis</h2>
      <p class="text-gray-600 dark:text-gray-400">Track your spending patterns and trends</p>
    </div>
    
    <div class="period-selector">
      <p-button 
        [label]="selectedPeriod === '6months' ? '6 Months' : '12 Months'"
        icon="pi pi-calendar"
        severity="secondary"
        [outlined]="true"
        (onClick)="onPeriodChange(selectedPeriod === '6months' ? '12months' : '6months')">
      </p-button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="charts-grid">
      <div class="chart-container">
        <p-skeleton width="100%" height="400px" borderRadius="8px"></p-skeleton>
      </div>
      <div class="chart-container">
        <p-skeleton width="100%" height="400px" borderRadius="8px"></p-skeleton>
      </div>
    </div>
    <div class="merchants-container mt-6">
      <p-skeleton width="100%" height="300px" borderRadius="8px"></p-skeleton>
    </div>
  </div>

  <!-- Charts Content -->
  <div *ngIf="!loading">
    
    <!-- Charts Grid -->
    <div class="charts-grid mb-6">
      
      <!-- Monthly Spending Chart -->
      <p-card class="chart-container">
        <ng-template pTemplate="header">
          <div class="chart-header">
            <h3 class="chart-title">Monthly Cash Flow</h3>
            <div class="chart-summary">
              <div class="summary-item">
                <span class="summary-label">Total Spending:</span>
                <span class="summary-value text-red-600">{{ getTotalSpending() | currency }}</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Total Income:</span>
                <span class="summary-value text-green-600">{{ getTotalIncome() | currency }}</span>
              </div>
              <div class="summary-item">
                <span class="summary-label">Net Cash Flow:</span>
                <span class="summary-value" [class]="getCashFlowColor()">{{ getNetCashFlow() | currency }}</span>
              </div>
            </div>
          </div>
        </ng-template>
        
        <div class="chart-content">
          <!-- Placeholder for actual chart component -->
          <div class="chart-placeholder">
            <div class="placeholder-content">
              <i class="pi pi-chart-line text-4xl text-gray-400 mb-4"></i>
              <h4 class="text-lg font-semibold text-gray-600 mb-2">Monthly Cash Flow Chart</h4>
              <p class="text-gray-500 text-center">
                Line chart showing spending vs income over {{ selectedPeriod === '6months' ? '6' : '12' }} months
              </p>
              
              <!-- Sample data display -->
              <div class="sample-data mt-4">
                <div *ngFor="let month of monthlySpending.slice(-3)" class="data-point">
                  <div class="data-month">{{ month.month }}</div>
                  <div class="data-values">
                    <span class="spending">Spent: {{ month.spending | currency }}</span>
                    <span class="income">Earned: {{ month.income | currency }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </p-card>

      <!-- Category Spending Chart -->
      <p-card class="chart-container">
        <ng-template pTemplate="header">
          <div class="chart-header">
            <h3 class="chart-title">Spending by Category</h3>
            <div class="chart-subtitle">Current Month</div>
          </div>
        </ng-template>
        
        <div class="chart-content">
          <!-- Placeholder for actual chart component -->
          <div class="chart-placeholder">
            <div class="placeholder-content">
              <i class="pi pi-chart-pie text-4xl text-gray-400 mb-4"></i>
              <h4 class="text-lg font-semibold text-gray-600 mb-2">Category Breakdown</h4>
              <p class="text-gray-500 text-center">
                Donut chart showing spending distribution by category
              </p>
              
              <!-- Category list -->
              <div class="category-list mt-4">
                <div *ngFor="let category of categorySpending.slice(0, 5); let i = index" class="category-item">
                  <div class="category-color" [style.background-color]="getCategoryColor(i)"></div>
                  <div class="category-info">
                    <div class="category-name">{{ category.category }}</div>
                    <div class="category-amount">{{ category.amount | currency }}</div>
                  </div>
                  <div class="category-percentage">{{ category.percentage | number:'1.1-1' }}%</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </p-card>
    </div>

    <!-- Top Merchants -->
    <p-card class="merchants-container">
      <ng-template pTemplate="header">
        <div class="chart-header">
          <h3 class="chart-title">Top Merchants</h3>
          <div class="chart-subtitle">Current Month</div>
        </div>
      </ng-template>
      
      <div class="merchants-content">
        <div *ngIf="topMerchants.length === 0" class="no-data">
          <i class="pi pi-inbox text-4xl text-gray-400 mb-4"></i>
          <p class="text-gray-500">No merchant data available</p>
        </div>
        
        <div *ngIf="topMerchants.length > 0" class="merchants-list">
          <div *ngFor="let merchant of topMerchants; let i = index" class="merchant-item">
            <div class="merchant-rank">{{ i + 1 }}</div>
            <div class="merchant-info">
              <div class="merchant-name">{{ merchant.merchant }}</div>
              <div class="merchant-count">{{ merchant.count }} transaction{{ merchant.count !== 1 ? 's' : '' }}</div>
            </div>
            <div class="merchant-amount">{{ merchant.amount | currency }}</div>
          </div>
        </div>
      </div>
    </p-card>
  </div>

  <!-- Chart Integration Note -->
  <div class="integration-note mt-6">
    <div class="note-content">
      <i class="pi pi-info-circle text-blue-500 mr-2"></i>
      <span class="text-sm text-gray-600">
        Charts are ready for integration with Chart.js, Recharts, or PrimeNG Charts.
        Current display shows sample data structure.
      </span>
    </div>
  </div>
</div>









